{
  "generatedAt": "2026-02-24T14:00:00Z",
  "summary": {
    "featureScore": 91,
    "serviceScore": 56,
    "uxScore": 89,
    "codeQualityScore": 92,
    "overallScore": 82
  },
  "featureGaps": {
    "overallScore": 91.2,
    "totalIonicFeatures": 228,
    "totalFlutterFeatures": 208,
    "pages": [
      {
        "ionicPage": "attendance/att-list/att-list.page.ts",
        "flutterPage": "attendance_list_page.dart",
        "score": 95,
        "ionicFeatures": ["loadAttendances", "processAttendances", "handleRefresh", "calculateStats", "navigateToDetail", "showCalendarView", "createNewAttendance", "percentage calculation", "collapsible sections", "date formatting", "pull-to-refresh"],
        "flutterFeatures": ["attendanceListProvider", "categorizedAttendancesProvider", "RefreshIndicator", "Calendar view modal", "Navigate to detail", "Create new attendance", "percentage badge", "_CollapsibleSection", "date formatting", "RefreshIndicator"],
        "missingInFlutter": ["calculateStats() for percentage overview"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "attendance/attendance.page.ts",
        "flutterPage": "attendance_detail_page.dart",
        "score": 92,
        "ionicFeatures": ["loadAttendance", "loadPersonAttendances", "updateStatus", "bulkUpdateStatus", "showBulkActionSheet", "showPersonActions", "showReasonDialog", "showNoteDialog", "sortPersons", "filterPersons", "groupByInstrument", "calculatePercentage", "saveNote", "saveReason", "editAttendance", "deleteAttendance", "shareAttendance", "duplicateAttendance", "realtime subscription", "swipe actions"],
        "flutterFeatures": ["attendanceDetailProvider", "updatePersonStatus", "bulkUpdateStatus", "showBulkActionSheet", "showPersonActions", "showReasonSheet", "showNoteSheet", "sorting options", "filtering options", "group by instrument", "calculatePercentage", "saveNote", "saveReason", "editAttendance", "deleteAttendance", "shareAttendance", "duplicateAttendance", "Slidable swipe actions"],
        "missingInFlutter": ["Realtime subscription (uses manual refresh)", "Some bulk action confirmations"],
        "extraInFlutter": [],
        "details": [{"feature": "Realtime subscription", "severity": "warning", "description": "Uses manual refresh instead of live updates"}]
      },
      {
        "ionicPage": "people/list/list.page.ts",
        "flutterPage": "people_list_page.dart",
        "score": 96,
        "ionicFeatures": ["loadPlayers", "filterPlayers", "sortPlayers", "groupByInstrument", "searchPlayers", "showPlayerDetail", "createPlayer", "pausePlayer", "unpausePlayer", "archivePlayer", "showPauseDialog", "showArchiveDialog", "showHandoverSheet", "selectionMode", "filter chips", "sort options", "group headers", "player avatar", "leader badge", "pause indicator", "critical indicator", "swipe actions", "pull-to-refresh"],
        "flutterFeatures": ["peopleListProvider", "_filterPeople", "_sortPeople", "_groupByGroup", "TextField search", "Navigate to detail", "FAB for new", "_pausePerson", "_unpausePerson", "_archivePerson", "_showPauseDialog", "_showArchiveDialog", "showHandoverSheet", "selection mode", "PopupMenuButton filter", "PopupMenuButton sort", "group headers", "CircleAvatar", "leader star icon", "pause icon", "critical warning icon", "Slidable swipe", "RefreshIndicator"],
        "missingInFlutter": ["Auto-pause end date handling UI indicator"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "people/person/person.page.ts",
        "flutterPage": "person_detail_page.dart",
        "score": 90,
        "ionicFeatures": ["loadPerson", "loadAttendanceHistory", "editPerson", "savePerson", "deletePerson", "pausePerson", "unpausePerson", "archivePerson", "restorePerson", "showDeleteConfirm", "showEditSheet", "uploadImage", "removeImage", "linkToApp", "unlinkFromApp", "sendNotification", "showContactOptions", "showExtraFields", "attendance chart", "instrument selector", "birthday picker", "address fields", "notes field", "leader toggle"],
        "flutterFeatures": ["personDetailProvider", "attendanceHistoryProvider", "editPerson", "savePerson", "deletePerson", "pausePerson", "unpausePerson", "archivePerson", "restorePerson", "delete confirmation dialog", "edit bottom sheet", "image upload", "contact options", "extra fields display", "attendance chart (fl_chart)", "instrument dropdown", "birthday DatePicker", "address fields", "notes TextField", "leader Switch", "critical toggle", "history list"],
        "missingInFlutter": ["Link/unlink to app account", "Send push notification", "Remove image (only upload)"],
        "extraInFlutter": [],
        "details": [{"feature": "Link/unlink to app account", "severity": "warning", "description": "Cannot connect person records to auth accounts"}]
      },
      {
        "ionicPage": "songs/songs.page.ts",
        "flutterPage": "songs_list_page.dart",
        "score": 95,
        "ionicFeatures": ["loadSongs", "filterSongs", "sortSongs", "filterByCategory", "filterByDifficulty", "filterByInstrument", "filterWithChoir", "filterWithSolo", "showSongDetail", "createSong", "showFilterSheet", "resetFilters", "category chips", "active filter chips", "sort indicator", "song number display", "conductor display", "lastSung display", "pull-to-refresh", "empty state"],
        "flutterFeatures": ["songsProvider", "filteredSongsProvider", "songSearchQueryProvider", "songFilterProvider", "songCategoriesProvider", "showSongFilterSheet", "reset filters", "category ChoiceChips", "_ActiveFilterChips", "sort indicator", "song fullNumber", "conductor display", "lastSung display", "RefreshIndicator", "empty state", "navigate to detail", "FAB for new song", "withChoir/withSolo chips", "search TextField"],
        "missingInFlutter": ["filterByInstrument fully implemented"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "songs/song/song.page.ts",
        "flutterPage": "song_detail_page.dart",
        "score": 88,
        "ionicFeatures": ["loadSong", "editSong", "saveSong", "deleteSong", "duplicateSong", "shareSong", "uploadPdf", "viewPdf", "deletePdf", "downloadPdf", "showPdfViewer", "addInstrumentPdf", "removeInstrumentPdf", "editLyrics", "showLyrics", "editConductor", "editCategory", "editDifficulty", "editNotes", "toggleWithChoir", "toggleWithSolo", "linkToAttendance", "showHistory", "playAudio", "showInstrumentPdfs"],
        "flutterFeatures": ["songDetailProvider", "edit mode", "save song", "delete song", "duplicate song", "share song", "uploadPdf", "viewPdf modal", "deletePdf", "addInstrumentPdf", "removeInstrumentPdf", "lyrics editor", "lyrics display", "conductor field", "category dropdown", "difficulty slider", "notes field", "withChoir toggle", "withSolo toggle", "link to attendance", "history display", "instrument PDFs section"],
        "missingInFlutter": ["downloadPdf for offline", "playAudio feature", "PDF viewer full-screen mode"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "settings/settings/settings.page.ts",
        "flutterPage": "settings_page.dart",
        "score": 98,
        "ionicFeatures": ["showTenantInfo", "switchTenant", "navigateToTypes", "navigateToSongs", "navigateToInstruments", "navigateToTeachers", "navigateToMeetings", "navigateToShifts", "navigateToUsers", "navigateToPending", "navigateToLeft", "navigateToCalendar", "navigateToNotifications", "navigateToGeneral", "showFeedback", "navigateToProfile", "logout", "showLogoutConfirm", "showVersionHistory", "role-based menu filtering"],
        "flutterFeatures": ["tenant info section", "switch tenant", "navigate to types", "navigate to songs", "navigate to instruments", "navigate to teachers", "navigate to meetings", "navigate to shifts", "navigate to users", "navigate to pending", "navigate to left", "navigate to calendar", "navigate to notifications", "navigate to general", "showFeedbackSheet", "navigate to profile", "logout with confirmation", "showVersionHistorySheet", "role-based visibility", "applicant status hint"],
        "missingInFlutter": [],
        "extraInFlutter": ["Voice leader section navigation"],
        "details": []
      },
      {
        "ionicPage": "settings/general/general.page.ts",
        "flutterPage": "general_settings_page.dart",
        "score": 94,
        "ionicFeatures": ["loadTenantSettings", "saveShortName", "saveLongName", "saveSeasonStart", "savePracticeStart", "savePracticeEnd", "saveHolidayRegion", "toggleWithExcuses", "toggleMaintainTeachers", "toggleParentsMode", "toggleShowMembersList", "toggleSongSharing", "toggleSelfRegistration", "toggleAutoApprove", "manageExtraFields", "addExtraField", "editExtraField", "deleteExtraField"],
        "flutterFeatures": ["tenantSettingsProvider", "update shortName", "update longName", "update seasonStart", "update practiceStart", "update practiceEnd", "holiday region dropdown", "withExcuses switch", "maintainTeachers switch", "parentsMode switch", "showMembersList switch", "songSharing switch", "selfRegistration switch", "autoApprove switch", "extraFieldsProvider", "add/edit/delete extra fields", "extra field type picker"],
        "missingInFlutter": ["Export tenant data feature"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "selfService/overview/overview.page.ts",
        "flutterPage": "self_service_overview_page.dart",
        "score": 96,
        "ionicFeatures": ["loadAttendances", "processAttendances", "calculateStats", "groupByTenant", "handleRefresh", "presentActionSheetForChoice", "signin", "signout", "showNoteAlertForSignin", "showNoteAlert", "onReasonSelect", "excuseModal handling", "groupingMode toggle", "currentAttendance card", "upcomingAttendances list", "pastAttendances list", "tenantGroups accordion", "status badge colors", "deadline info display", "reason selection modal", "late coming option"],
        "flutterFeatures": ["crossTenantAttendancesProvider", "processAttendances", "calculateStats", "groupByTenant", "RefreshIndicator", "action sheet for choices", "signIn", "signOut", "note alert for signin", "note edit alert", "reason selection in sheet", "reason sheet modal", "grouping mode segmented control", "current attendance card", "upcoming list", "past list", "tenant accordion groups", "status badge", "deadline info", "reason selection", "late coming toggle", "legend sheet"],
        "missingInFlutter": ["Breakpoint adjustment for modal (native sheet behavior)"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "stats/stats.page.ts",
        "flutterPage": "statistics_page.dart",
        "score": 85,
        "ionicFeatures": ["loadAttendances", "loadPlayers", "applyDateFilter", "initializeCharts", "initAttendanceTrendChart", "initStatusPieChart", "initInstrumentBarChart", "initTop20Chart", "initAgeDistributionChart", "initAvgAgePerInstrumentChart", "initDivaIndexChart", "getOrganizationStats", "filterInstances", "openInstancesAlert", "bestAttendance calculation", "worstAttendance calculation", "date range picker", "player counts", "unique persons across tenants", "organization multi-tenant stats"],
        "flutterFeatures": ["statisticsProvider", "playersStatsProvider", "date range filter", "initializeCharts via fl_chart", "trend line chart", "status pie chart", "instrument bar chart", "top 20 chart", "age distribution chart", "avg age per instrument", "diva index chart", "best/worst attendance", "average percentage", "date range DatePicker", "player count cards", "summary statistics cards", "RefreshIndicator", "chart animations"],
        "missingInFlutter": ["Organization-wide multi-tenant statistics", "filterInstances() for org stats", "openInstancesAlert() for org info"],
        "extraInFlutter": [],
        "details": [{"feature": "Organization-wide multi-tenant statistics", "severity": "critical", "description": "Flutter lacks aggregated statistics across all organization tenants"}]
      },
      {
        "ionicPage": "planning/planning.page.ts",
        "flutterPage": "planning_page.dart",
        "score": 88,
        "ionicFeatures": ["loadPlanItems", "createPlanItem", "editPlanItem", "deletePlanItem", "reorderPlanItems", "showPlanItemDetail", "showCreateSheet", "showEditSheet", "showDeleteConfirm", "filterByType", "sortByDate", "linkToAttendance", "showSongPicker", "drag-and-drop reorder", "plan item status toggle"],
        "flutterFeatures": ["planItemsProvider", "create plan item", "edit plan item", "delete plan item", "ReorderableListView", "plan item detail view", "create bottom sheet", "edit bottom sheet", "delete confirmation", "type filtering", "date sorting", "song picker dialog", "drag handle for reorder"],
        "missingInFlutter": ["Link to attendance from plan item", "Plan item status toggle"],
        "extraInFlutter": [],
        "details": []
      },
      {
        "ionicPage": "login/login.page.ts",
        "flutterPage": "login_page.dart",
        "score": 90,
        "ionicFeatures": ["login", "register", "forgotPassword", "showPasswordReset", "validateEmail", "validatePassword", "showLoginError", "showRegisterSuccess", "navigateToTenants", "checkExistingSession"],
        "flutterFeatures": ["login via Supabase", "register via Supabase", "forgot password flow", "email validation", "password validation", "error snackbar", "success feedback", "navigate to tenants", "session check in router"],
        "missingInFlutter": ["Detailed registration success page/toast"],
        "extraInFlutter": [],
        "details": []
      }
    ],
    "criticalGaps": [
      {
        "feature": "Organization-wide multi-tenant statistics",
        "ionicLocation": "stats/stats.page.ts",
        "description": "Flutter version lacks the ability to view aggregated statistics across all tenants in an organization.",
        "impact": "HIGH"
      },
      {
        "feature": "Link/Unlink user to app account",
        "ionicLocation": "people/person/person.page.ts",
        "description": "Flutter version cannot link or unlink a person record to their app authentication account.",
        "impact": "MEDIUM"
      },
      {
        "feature": "Realtime subscription for attendance updates",
        "ionicLocation": "attendance/attendance.page.ts",
        "description": "Flutter uses manual refresh instead of automatic realtime updates when attendance statuses change.",
        "impact": "MEDIUM"
      }
    ],
    "extraFlutterFeatures": [
      {"feature": "Voice Leader section in settings", "location": "settings_page.dart"},
      {"feature": "AnimatedListItem", "location": "Multiple list pages"},
      {"feature": "Handover sheet for player transfer", "location": "people_list_page.dart"},
      {"feature": "Auto-unpause check", "location": "people_list_page.dart"},
      {"feature": "Legend sheet in self-service", "location": "self_service_overview_page.dart"},
      {"feature": "Calendar view with TableCalendar", "location": "attendance_list_page.dart"},
      {"feature": "fl_chart integration", "location": "statistics_page.dart"},
      {"feature": "Percentage badge widget", "location": "attendance_list_page.dart"}
    ]
  },
  "serviceParity": {
    "overallScore": 56,
    "totalIonicMethods": 178,
    "totalMappedMethods": 99,
    "services": [
      {"ionicService": "attendance.service.ts", "flutterRepo": "attendance_repository.dart", "score": 76, "methods": [
        {"ionic": "getAttendance()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "addAttendance()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updateAttendance()", "flutter": "update()", "status": "mapped"},
        {"ionic": "removeAttendance()", "flutter": "delete()", "status": "mapped"},
        {"ionic": "getParentAttendances()", "flutter": null, "status": "missing"},
        {"ionic": "deletePersonAttendanceById()", "flutter": null, "status": "missing"}
      ]},
      {"ionicService": "player.service.ts", "flutterRepo": "player_repository.dart", "score": 60, "methods": [
        {"ionic": "getPlayers()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createPlayer()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updatePlayer()", "flutter": "update()", "status": "mapped"},
        {"ionic": "deletePlayer()", "flutter": "delete()", "status": "mapped"},
        {"ionic": "getPlayersByGroup()", "flutter": null, "status": "missing"},
        {"ionic": "getPlayersWithoutAccount()", "flutter": null, "status": "missing"}
      ]},
      {"ionicService": "meeting.service.ts", "flutterRepo": "meeting_repository.dart", "score": 100, "methods": [
        {"ionic": "getMeetings()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createMeeting()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updateMeeting()", "flutter": "update()", "status": "mapped"},
        {"ionic": "deleteMeeting()", "flutter": "delete()", "status": "mapped"}
      ]},
      {"ionicService": "group.service.ts", "flutterRepo": "group_repository.dart", "score": 100, "methods": [
        {"ionic": "getGroups()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createGroup()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updateGroup()", "flutter": "update()", "status": "mapped"},
        {"ionic": "deleteGroup()", "flutter": "delete()", "status": "mapped"}
      ]},
      {"ionicService": "teacher.service.ts", "flutterRepo": "teacher_repository.dart", "score": 100, "methods": [
        {"ionic": "getTeachers()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createTeacher()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updateTeacher()", "flutter": "update()", "status": "mapped"},
        {"ionic": "deleteTeacher()", "flutter": "delete()", "status": "mapped"}
      ]},
      {"ionicService": "feedback.service.ts", "flutterRepo": "feedback_repository.dart", "score": 100, "methods": [
        {"ionic": "submitFeedback()", "flutter": "submitFeedback()", "status": "mapped"},
        {"ionic": "submitQuestion()", "flutter": "submitQuestion()", "status": "mapped"}
      ]},
      {"ionicService": "shift.service.ts", "flutterRepo": "shift_repository.dart", "score": 63, "methods": [
        {"ionic": "getShifts()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createShift()", "flutter": "create()", "status": "mapped"},
        {"ionic": "updateShift()", "flutter": "update()", "status": "mapped"},
        {"ionic": "deleteShift()", "flutter": "delete()", "status": "mapped"},
        {"ionic": "getCrossTenantShifts()", "flutter": null, "status": "missing"}
      ]},
      {"ionicService": "song.service.ts", "flutterRepo": "song_repository.dart", "score": 38, "methods": [
        {"ionic": "getSongs()", "flutter": "getAll()", "status": "mapped"},
        {"ionic": "createSong()", "flutter": "create()", "status": "mapped"},
        {"ionic": "uploadFile()", "flutter": null, "status": "missing"},
        {"ionic": "downloadFile()", "flutter": null, "status": "missing"},
        {"ionic": "deleteFile()", "flutter": null, "status": "missing"}
      ]},
      {"ionicService": "history.service.ts", "flutterRepo": null, "score": 0, "methods": []},
      {"ionicService": "image.service.ts", "flutterRepo": null, "score": 0, "methods": []},
      {"ionicService": "notification.service.ts", "flutterRepo": null, "score": 0, "methods": []},
      {"ionicService": "telegram.service.ts", "flutterRepo": null, "score": 0, "methods": []},
      {"ionicService": "ai.service.ts", "flutterRepo": null, "score": 0, "methods": []}
    ],
    "missingServices": [
      "ai.service.ts",
      "history.service.ts",
      "image.service.ts",
      "notification.service.ts",
      "telegram.service.ts",
      "organisation.service.ts",
      "instance.service.ts",
      "user-registration.service.ts",
      "viewer-parent.service.ts",
      "church.service.ts"
    ]
  },
  "uxDivergences": {
    "overallScore": 89,
    "categories": [
      {
        "name": "dialogs",
        "ionic": {"count": 110},
        "flutter": {"count": 75},
        "divergences": [
          {"location": "Person Actions Menu", "ionic": "ActionSheet with options", "flutter": "BottomSheet with ListTile", "severity": "info"},
          {"location": "Dialog count difference", "ionic": "110 total dialogs", "flutter": "75 total dialogs", "severity": "warning", "description": "35 fewer dialogs - some consolidated, some potentially missing"}
        ],
        "score": 85
      },
      {
        "name": "toasts_snackbars",
        "ionic": {"count": 1},
        "flutter": {"count": 37},
        "divergences": [
          {"location": "Toast Duration", "ionic": "3000ms default", "flutter": "4000ms default", "severity": "info"}
        ],
        "score": 92
      },
      {
        "name": "loading_states",
        "ionic": {"count": 17},
        "flutter": {"count": 97},
        "divergences": [
          {"location": "Loading Pattern", "ionic": "Modal loading overlay with message", "flutter": "Inline CircularProgressIndicator", "severity": "warning"},
          {"location": "Loading with Message", "ionic": "loadingController with message", "flutter": "No standardized pattern", "severity": "warning"}
        ],
        "score": 78
      },
      {
        "name": "pull_to_refresh",
        "ionic": {"count": 11},
        "flutter": {"count": 19},
        "divergences": [],
        "score": 95
      },
      {
        "name": "forms_validation",
        "ionic": {"count": 5},
        "flutter": {"count": 41},
        "divergences": [],
        "score": 98
      },
      {
        "name": "navigation",
        "ionic": {"count": 37},
        "flutter": {"count": 234},
        "divergences": [],
        "score": 90
      }
    ],
    "improvements": [
      "Flutter has centralized DialogHelper - better abstraction",
      "Flutter has ToastHelper with typed methods (success, error, etc.)",
      "Flutter has better button loading states with inline indicators",
      "Flutter has more comprehensive refresh coverage (19 vs 11)",
      "Flutter has much more comprehensive form validation (22 validators)"
    ]
  },
  "codeQuality": {
    "overallScore": 92,
    "categories": [
      {
        "name": "multi_tenant_security",
        "status": "warning",
        "score": 65,
        "findings": [
          {"file": "lib/data/repositories/song_repository.dart", "line": 41, "severity": "critical", "message": "Missing tenantId filter in getSongById()", "code": ".eq('id', id) without tenant validation"},
          {"file": "lib/data/repositories/song_repository.dart", "line": 89, "severity": "critical", "message": "Missing tenantId filter in updateSong()"},
          {"file": "lib/data/repositories/song_repository.dart", "line": 106, "severity": "critical", "message": "Missing tenantId filter in deleteSong()"},
          {"file": "lib/data/repositories/group_repository.dart", "line": 77, "severity": "critical", "message": "Missing tenantId filter in getGroupById()"},
          {"file": "lib/data/repositories/group_repository.dart", "line": 123, "severity": "critical", "message": "Missing tenantId filter in updateGroup()"},
          {"file": "lib/data/repositories/group_repository.dart", "line": 149, "severity": "critical", "message": "Missing tenantId filter in deleteGroup()"},
          {"file": "lib/data/repositories/group_repository.dart", "line": 208, "severity": "critical", "message": "Missing tenantId filter in updateGroupCategory()"},
          {"file": "lib/data/repositories/group_repository.dart", "line": 225, "severity": "critical", "message": "Missing tenantId filter in deleteGroupCategory()"}
        ]
      },
      {"name": "riverpod_patterns", "status": "pass", "score": 100, "findings": []},
      {"name": "error_handling", "status": "pass", "score": 100, "findings": []},
      {"name": "freezed_models", "status": "pass", "score": 100, "findings": []},
      {"name": "import_structure", "status": "pass", "score": 100, "findings": []},
      {"name": "repository_structure", "status": "pass", "score": 100, "findings": []},
      {"name": "provider_tenant_injection", "status": "pass", "score": 100, "findings": []}
    ],
    "criticalFindings": [
      {"file": "lib/data/repositories/song_repository.dart", "issue": "getSongById(), updateSong(), deleteSong() missing tenantId filter"},
      {"file": "lib/data/repositories/group_repository.dart", "issue": "getGroupById(), updateGroup(), deleteGroup(), updateGroupCategory(), deleteGroupCategory() missing tenantId filter"}
    ],
    "warningCount": 2,
    "infoCount": 0
  }
}
